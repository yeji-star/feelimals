<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<link rel="stylesheet" href="/resource/style.css" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magic/1.1.0/magic.min.css" />

<style>
#settingPanel {
	position: fixed;
	right: 0;
	top: 0;
	width: 300px;
	height: 100%;
	z-index: 50;
}
</style>

<!-- ì„¤ì • íŒ¨ë„ -->
<div id="settingPanel"
	class=" fixed top-0 right-0 w-[300px] h-full bg-[#FFD8B1] z-50 
           shadow-lg animate__animated hidden"
	onclick="event.stopPropagation()">

	<div class="flex justify-between items-center p-4 font-bold border-b border-orange-300">
		<span>ì„¤ì •</span>
		<button onclick="closeSetting()">
			<i class="fa-solid fa-xmark fa-xl" style="color: #ffa94b;"></i>
		</button>
	</div>
	<ul class="p-4 space-y-4 text-lg">
		<li>
			<i class="fas fa-user"></i>
			í”„ë¡œí•„
		</li>
		<!-- ë™ë¬¼ ìºë¦­í„° -->
		<li class="cursor-pointer" onclick="toggleCharacterMenu()">
			<i class="fas fa-paw"></i>
			ë™ë¬¼ ìºë¦­í„°
			<ul id="characterMenu" class="ml-6 mt-2 space-y-2 hidden transition-all duration-300">
				<c:choose>
					<c:when test="${rq.loginedMember.charaId == 1}">
						<li class="font-bold text-orange-500">ğŸ° í† ë¼!</li>
					</c:when>
					<c:otherwise>
						<li class="cursor-pointer hover:underline" onclick="selectCharacter(1)">ğŸ° í† ë¼</li>
					</c:otherwise>
				</c:choose>

				<c:choose>
					<c:when test="${rq.loginedMember.charaId == 2}">
						<li class="font-bold text-orange-500">ğŸ¦‰ ë¶€ì—‰ì´!</li>
					</c:when>
					<c:otherwise>
						<li class="cursor-pointer hover:underline" onclick="selectCharacter(2)">ğŸ¦‰ ë¶€ì—‰ì´</li>
					</c:otherwise>
				</c:choose>

				<c:choose>
					<c:when test="${rq.loginedMember.charaId == 3}">
						<li class="font-bold text-orange-500">ğŸ± ê³ ì–‘ì´!</li>
					</c:when>
					<c:otherwise>
						<li class="cursor-pointer hover:underline" onclick="selectCharacter(3)">ğŸ± ê³ ì–‘ì´</li>
					</c:otherwise>
				</c:choose>

				<c:choose>
					<c:when test="${rq.loginedMember.charaId == 4}">
						<li class="font-bold text-orange-500">ğŸ¶ ê°œ!</li>
					</c:when>
					<c:otherwise>
						<li class="cursor-pointer hover:underline" onclick="selectCharacter(4)">ğŸ¶ ê°œ</li>
					</c:otherwise>
				</c:choose>

				<c:choose>
					<c:when test="${rq.loginedMember.charaId == 5}">
						<li class="font-bold text-orange-500">ğŸ» ê³°!</li>
					</c:when>
					<c:otherwise>
						<li class="cursor-pointer hover:underline" onclick="selectCharacter(5)">ğŸ» ê³°</li>
					</c:otherwise>
				</c:choose>
			</ul>
		</li>
		<li>
			<i class="fas fa-user-friends"></i>
			ê³„ì •
		</li>
		<li>
			<i class="fas fa-bell"></i>
			ì•Œë¦¼
		</li>
	</ul>
</div>

<script>
	function toggleCharacterMenu() {
		const menu = document.getElementById("characterMenu");
		menu.classList.toggle("hidden");
	}

	function selectCharacter(animal) {
		alert(`${animal} ì„ íƒë¨`);

		// ì—¬ê¸°ì„œ Ajax í˜¸ì¶œ ë“±ìœ¼ë¡œ ì„œë²„ì— ìºë¦­í„° ë³€ê²½ ìš”ì²­ ê°€ëŠ¥
		// ì˜ˆì‹œ:
		// fetch("/feelimals/api/updateCharacter", { method: "POST", body: JSON.stringify({ character: animal }) })

		// ë³€ê²½ í›„ ì„¤ì •ì°½ ë‹«ê¸° ë“± UI ì²˜ë¦¬ë„ ê°€ëŠ¥
	}
</script>





